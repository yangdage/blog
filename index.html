<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Marks &amp; Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Marks & Notes">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Marks & Notes">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Marks & Notes">
<meta name="twitter:description">
  
    <link rel="alternate" href="/atom.xml" title="Marks &amp; Notes" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/blog/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">Marks &amp; Notes</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-vim-xml-format" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2016/03/30/vim-xml-format/" class="article-date">
  <time datetime="2016-03-30T03:22:51.159Z" itemprop="datePublished">2016-03-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2016/03/30/vim-xml-format/">vim下xml文件格式化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-打开需要格式化的文件"><a href="#1-打开需要格式化的文件" class="headerlink" title="1.打开需要格式化的文件"></a>1.打开需要格式化的文件</h3><p>使用vim命令打开需要格式化的xml文件，html也属于xml的一种，因此也可使用该方法格式化html文件。<br>现有一个如下的未格式化的文件：<br><img src="https://raw.githubusercontent.com/yangdage/images/master/20160330/20160328154539.png" alt="origin image"></p>
<h3 id="2-保存临时修改"><a href="#2-保存临时修改" class="headerlink" title="2.保存临时修改"></a>2.保存临时修改</h3><p>如果我们打开后有对文件进行编辑操作，需要保存所做的修改</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:w</span><br></pre></td></tr></table></figure>
<p>在命令模式下输入上面的命令，保存改动，不退出文件</p>
<h3 id="3-设置文件类型"><a href="#3-设置文件类型" class="headerlink" title="3.设置文件类型"></a>3.设置文件类型</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:<span class="built_in">set</span> filetype=xml</span><br></pre></td></tr></table></figure>
<h3 id="4-启用自动缩进选项"><a href="#4-启用自动缩进选项" class="headerlink" title="4.启用自动缩进选项"></a>4.启用自动缩进选项</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:filetype indent on</span><br></pre></td></tr></table></figure>
<h3 id="5-全局格式化"><a href="#5-全局格式化" class="headerlink" title="5.全局格式化"></a>5.全局格式化</h3><p>回到文件头：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gg</span><br></pre></td></tr></table></figure>
<p>格式化到文件尾:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">G</span><br></pre></td></tr></table></figure>
<h3 id="6-格式化结果"><a href="#6-格式化结果" class="headerlink" title="6.格式化结果"></a>6.格式化结果</h3><p><img src="https://raw.githubusercontent.com/yangdage/images/master/20160330/20160330115035.png" alt="origin image"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/blog/2016/03/30/vim-xml-format/" data-id="cimebmvfp0003zsqe5ztagpld" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-nsq-start" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2016/03/30/nsq-start/" class="article-date">
  <time datetime="2016-03-30T02:31:35.639Z" itemprop="datePublished">2016-03-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2016/03/30/nsq-start/">初识NSQ分布式实时消息架构</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-NSQ知识普及"><a href="#1-NSQ知识普及" class="headerlink" title="1.NSQ知识普及"></a>1.NSQ知识普及</h3><p>NSQ是一个基于Go语言的开源的分布式实时消息平台，他的代码托管在GitHub上。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/nsqio/nsq</span><br></pre></td></tr></table></figure>
<p>NSQ可用于大规模系统的实时消息服务，它的设计目标是为在分布式环境下提供一个强大的去除中心化的分布式服务架构，可以每天处理数以亿计的实时消息。NSQ的优点是无单点故障、故障容错、高可用性和信息传递的高可靠性。NSQ安装部署简单，容易水平扩展，目前已有很多公司都是采用其作为自身企业内部的实时消息服务。而且它的灵活性很强，支持很多种协议。官方直接提供了拆箱可用的Go库和Python库。好，其他的就不废话了，随便搜索下NSQ相关的博文或者去NSQ的官方网站了解更详细的信息吧。</p>
<h3 id="2-NSQ的四大组件"><a href="#2-NSQ的四大组件" class="headerlink" title="2.NSQ的四大组件"></a>2.NSQ的四大组件</h3><p>nsqlookupd：管理nsqd节点拓扑信息并提供最终一致性的发现服务的守护进程</p>
<p>nsqd：负责接收、排队、转发消息到客户端的守护进程，并且定时向nsqlookupd服务发送心跳</p>
<p>nsqadmin：nsq的web统计界面，可实时查看集群的统计数据和执行一些管理任务 </p>
<p>utilities：常见基础功能、数据流处理工具，如nsq_stat、nsq_tail、nsq_to_file、nsq_to_http、nsq_to_nsq、to_nsq </p>
<h3 id="3-NSQ依赖"><a href="#3-NSQ依赖" class="headerlink" title="3.NSQ依赖"></a>3.NSQ依赖</h3><h4 id="3-1-GO：NSQ是有GO语言开发的，必不可少的需要事先安装配置好GO相关的环境变量信息。"><a href="#3-1-GO：NSQ是有GO语言开发的，必不可少的需要事先安装配置好GO相关的环境变量信息。" class="headerlink" title="3.1 GO：NSQ是有GO语言开发的，必不可少的需要事先安装配置好GO相关的环境变量信息。"></a>3.1 GO：NSQ是有GO语言开发的，必不可少的需要事先安装配置好GO相关的环境变量信息。</h4><p>（i）首先自然是去官网找到对应系统的较新较稳定的版本安装包，中文站地址：<a href="http://golangtc.com/download" target="_blank" rel="external">http://golangtc.com/download</a></p>
<p>由于其官方地址在国外，下载速度可能比较慢，推荐使用本地下载的链接进行下载。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://golangtc.com/static/go/go1.5beta1.linux-amd64.tar.gz</span><br></pre></td></tr></table></figure>
<p>（ii）下载完安装包后解压并且复制到/usr/local/目录下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf go1.5beta1.linux-amd64.tar.gz</span><br><span class="line"></span><br><span class="line">mv go /usr/<span class="built_in">local</span></span><br></pre></td></tr></table></figure>
<p>（iii）GO环境变量配置</p>
<p>打开环境变量配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/profile</span><br></pre></td></tr></table></figure>
<p>然后在文件的最后追加以下配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GOROOT=/usr/<span class="built_in">local</span>/go</span><br><span class="line"><span class="built_in">export</span> GOPATH=\<span class="variable">$GOROOT</span>/bin</span><br><span class="line"><span class="built_in">export</span> PATH=\<span class="variable">$PATH</span>:\<span class="variable">$GOPATH</span></span><br></pre></td></tr></table></figure>
<p>配置好环境变量后再让它马上生效</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure>
<p>最后查看是否安装成功</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go version</span><br></pre></td></tr></table></figure>
<p>如果控制台打印出了对应的版本号信息，那就恭喜你了，等等。。。别急，这才刚刚开始。</p>
<h4 id="3-2-GIT：因为稍候需要从github上获取NSQ的安装文件"><a href="#3-2-GIT：因为稍候需要从github上获取NSQ的安装文件" class="headerlink" title="3.2 GIT：因为稍候需要从github上获取NSQ的安装文件"></a>3.2 GIT：因为稍候需要从github上获取NSQ的安装文件</h4><p>直接命令安装就好</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install git</span><br></pre></td></tr></table></figure>
<h3 id="4-安装NSQ"><a href="#4-安装NSQ" class="headerlink" title="4.安装NSQ"></a>4.安装NSQ</h3><p>命令行直接执行下面的命令安装NSQ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/kr/godep</span><br><span class="line">go get github.com/bmizerany/assert</span><br><span class="line">godep get github.com/bitly/nsq/...</span><br></pre></td></tr></table></figure>
<p><strong>注：godev为GO的语言依赖管理包，assert为GO的测试框架，至于最后一个嘛，自己猜吧</strong></p>
<p>到此，NSQ就安装好了，接下来就可以一起愉快的玩耍了</p>
<h3 id="5-启动部署和测试"><a href="#5-启动部署和测试" class="headerlink" title="5.启动部署和测试"></a>5.启动部署和测试</h3><p>这节的内容就直接翻译了官网的原文了，有兴趣的可以自己去看下</p>
<p><a href="http://nsq.io/overview/quick_start.html" target="_blank" rel="external">http://nsq.io/overview/quick_start.html</a></p>
<h4 id="5-1-打开一个终端，启动nsqlookupd"><a href="#5-1-打开一个终端，启动nsqlookupd" class="headerlink" title="5.1 打开一个终端，启动nsqlookupd"></a>5.1 打开一个终端，启动nsqlookupd</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nsqlookupd</span><br></pre></td></tr></table></figure>
<h4 id="5-2-再打开一个终端，启动nsq"><a href="#5-2-再打开一个终端，启动nsq" class="headerlink" title="5.2 再打开一个终端，启动nsq"></a>5.2 再打开一个终端，启动nsq</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nsqd --lookupd-tcp-address=127.0.0.1:4160</span><br></pre></td></tr></table></figure>
<h4 id="5-3-再打开一个终端，启动nsqadmin"><a href="#5-3-再打开一个终端，启动nsqadmin" class="headerlink" title="5.3 再打开一个终端，启动nsqadmin"></a>5.3 再打开一个终端，启动nsqadmin</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nsqadmin --lookupd-http-address=127.0.0.1:4161</span><br></pre></td></tr></table></figure>
<h4 id="5-4-创建一个topic并且发布一条消息，由于nsq支持http协议发布消息，我们可以直接使用curl命令。"><a href="#5-4-创建一个topic并且发布一条消息，由于nsq支持http协议发布消息，我们可以直接使用curl命令。" class="headerlink" title="5.4 创建一个topic并且发布一条消息，由于nsq支持http协议发布消息，我们可以直接使用curl命令。"></a>5.4 创建一个topic并且发布一条消息，由于nsq支持http协议发布消息，我们可以直接使用curl命令。</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="_">-d</span> <span class="string">'hello world 1'</span> <span class="string">'http://127.0.0.1:4151/put?topic=test'</span></span><br></pre></td></tr></table></figure>
<h4 id="5-5-再开一个终端，-开了好多终端了，来处理消息数据流，将消息写入-tmp文件加下的日志文件-文件名默认由主题topic-主机-日期时间戳组成。"><a href="#5-5-再开一个终端，-开了好多终端了，来处理消息数据流，将消息写入-tmp文件加下的日志文件-文件名默认由主题topic-主机-日期时间戳组成。" class="headerlink" title="5.5 再开一个终端，@~@!!!,开了好多终端了，来处理消息数据流，将消息写入/tmp文件加下的日志文件,文件名默认由主题topic+主机+日期时间戳组成。"></a>5.5 再开一个终端，@~@!!!,开了好多终端了，来处理消息数据流，将消息写入/tmp文件加下的日志文件,文件名默认由主题topic+主机+日期时间戳组成。</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nsq_to_file --topic=<span class="built_in">test</span> --output-dir=/tmp --lookupd-http-address=127.0.0.1:4161</span><br></pre></td></tr></table></figure>
<h4 id="5-6-我们再发布两条消息，看看日志文件中的变化。"><a href="#5-6-我们再发布两条消息，看看日志文件中的变化。" class="headerlink" title="5.6 我们再发布两条消息，看看日志文件中的变化。"></a>5.6 我们再发布两条消息，看看日志文件中的变化。</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="_">-d</span> <span class="string">'hello world 2'</span> <span class="string">'http://127.0.0.1:4151/put?topic=test'</span></span><br><span class="line">curl <span class="_">-d</span> <span class="string">'hello world 3'</span> <span class="string">'http://127.0.0.1:4151/put?topic=test'</span></span><br></pre></td></tr></table></figure>
<h4 id="5-7特别说明"><a href="#5-7特别说明" class="headerlink" title="5.7特别说明"></a>5.7特别说明</h4><p>需要特别注意的是这里的nsq_to_file客户端进程并不确定消息什么时候会发布，所以它会在连接没有断开的情况下定时去nsqlookupd中检索消息，确保消息不丢失。</p>
<p><img src="http://img.blog.csdn.net/20150830214444426" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20150830214529061" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20150830214544464" alt="这里写图片描述"></p>
<h3 id="6-nsqadmin的web统计"><a href="#6-nsqadmin的web统计" class="headerlink" title="6.nsqadmin的web统计"></a>6.nsqadmin的web统计</h3><p><img src="http://img.blog.csdn.net/20150830214340984" alt="这里写图片描述"></p>
<p>nsq自身提供了一个便于查看和操作的web界面，可以实时查看统计信息和执行一些管理任务。</p>
<h4 id="6-1浏览器打开nsqadmin的web页"><a href="#6-1浏览器打开nsqadmin的web页" class="headerlink" title="6.1浏览器打开nsqadmin的web页"></a>6.1浏览器打开nsqadmin的web页</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.1.111:4171/</span><br></pre></td></tr></table></figure>
<p>由于默认情况下linux系统，nsqadmin的默认端口4171限制了对外访问，所以我们要打开4171端口的路由访问限制，便于外部系统的浏览器访问。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -A  INPUT -p tcp --dport 4171 -j ACCEPT</span><br></pre></td></tr></table></figure>
<ul>
<li>参数讲解：<br>–A 添加一条规则的意思<br>–p 指定是什么协议，这里是tcp协议<br>–dport 就是目标端口，当数据从外部进入服务器为目标端口<br>–sport 数据从服务器出去，则为数据源端口使用<br>–j 就是指定是 ACCEPT -接收 或者 DROP 不接收</li>
</ul>
<h4 id="6-2-Topics界面"><a href="#6-2-Topics界面" class="headerlink" title="6.2 Topics界面"></a>6.2 Topics界面</h4><p><img src="http://img.blog.csdn.net/20150830213809966" alt="这里写图片描述"></p>
<p>这里详细的列出了所有的发布的topic主题列表，可以点进去查看单个主题的详细统计信息。还可以管理主题，比如清空主题的消息队列，删除主题，暂停主题等等。</p>
<h4 id="6-3-Nodes节点列表"><a href="#6-3-Nodes节点列表" class="headerlink" title="6.3 Nodes节点列表"></a>6.3 Nodes节点列表</h4><p><img src="http://img.blog.csdn.net/20150830213848425" alt="这里写图片描述"></p>
<p>这个页面可以查看当前nsqlookupd协调管理的节点列表，以及一些连接信息，比如端口，连接数，主题和主题数量等等。</p>
<h4 id="6-4-Counter消息计数页"><a href="#6-4-Counter消息计数页" class="headerlink" title="6.4 Counter消息计数页"></a>6.4 Counter消息计数页</h4><p><img src="http://img.blog.csdn.net/20150830214013450" alt="这里写图片描述"></p>
<p>这个页面最简洁，中间一个硕大的计数牌，展示已经处理过的消息数目。</p>
<h4 id="6-5-Lookup界面"><a href="#6-5-Lookup界面" class="headerlink" title="6.5 Lookup界面"></a>6.5 Lookup界面</h4><p><img src="http://img.blog.csdn.net/20150830214233531" alt="这里写图片描述"></p>
<p>这里我们可以创建消息主题和消息通道。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/blog/2016/03/30/nsq-start/" data-id="cimebmvfq0004zsqecjtxz6lm" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-windows-port-used" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2016/03/30/windows-port-used/" class="article-date">
  <time datetime="2016-03-30T02:18:32.655Z" itemprop="datePublished">2016-03-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2016/03/30/windows-port-used/">windows下端口占用程序查询</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-打开命令行工具"><a href="#1-打开命令行工具" class="headerlink" title="1.打开命令行工具"></a>1.打开命令行工具</h3><p>输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -aon|findstr 4000</span><br></pre></td></tr></table></figure>
<p>可以看到类似以下的输出，最后一列为占用端口的程序的进程id</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TCP    0.0.0.0:8082           0.0.0.0:0              LISTENING       2480</span><br><span class="line">TCP    [::]:8082              [::]:0                 LISTENING       2480</span><br></pre></td></tr></table></figure>
<h3 id="2-根据进程ID查询程序信息"><a href="#2-根据进程ID查询程序信息" class="headerlink" title="2.根据进程ID查询程序信息"></a>2.根据进程ID查询程序信息</h3><p>输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tasklist|findstr 2480</span><br></pre></td></tr></table></figure>
<p>控制台会输出该进程的程序信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.exe                      2480 Console                    3    253,168 K</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/blog/2016/03/30/windows-port-used/" data-id="cimebmvfs0005zsqezy0chcv6" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-api-design" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2016/03/28/api-design/" class="article-date">
  <time datetime="2016-03-28T10:54:50.415Z" itemprop="datePublished">2016-03-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2016/03/28/api-design/">API接口文档设计</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="功能说明"><a href="#功能说明" class="headerlink" title="功能说明"></a>功能说明</h3><p>简单说明接口实现的相关功能，使用场景等等。</p>
<h3 id="调用说明"><a href="#调用说明" class="headerlink" title="调用说明"></a>调用说明</h3><h4 id="请求地址"><a href="#请求地址" class="headerlink" title="请求地址"></a>请求地址</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.xxx.com/api/demo</span><br></pre></td></tr></table></figure>
<h4 id="请求方式"><a href="#请求方式" class="headerlink" title="请求方式"></a>请求方式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET/POST</span><br></pre></td></tr></table></figure>
<h4 id="请求头信息"><a href="#请求头信息" class="headerlink" title="请求头信息"></a>请求头信息</h4><p>一些需要设置请求头的需要加上特殊说明。<br>例如:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Type：application/json</span><br></pre></td></tr></table></figure></p>
<h4 id="请求参数"><a href="#请求参数" class="headerlink" title="请求参数"></a>请求参数</h4><p>GET请求方式的列表方式列出请求所需参数，包含说明是否为必传字段。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
<th>必传</th>
</tr>
</thead>
<tbody>
<tr>
<td>userId</td>
<td>int</td>
<td>用户ID</td>
<td>Y</td>
</tr>
<tr>
<td>timestamp</td>
<td>long</td>
<td>时间戳(毫秒值)</td>
<td>N</td>
</tr>
</tbody>
</table>
<p>POST方式需要传json参数的列出json样例格式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="string">"userId"</span>:<span class="number">123</span>,	<span class="comment">//用户ID，必传</span></span><br><span class="line">	<span class="string">"timestamp"</span>:<span class="number">3887717000</span>	<span class="comment">//时间戳(毫秒值)，非必传</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="返回"><a href="#返回" class="headerlink" title="返回"></a>返回</h3><p>一般接口返回JSON或XML格式的数据，需列出相关返回格式样例数据。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="string">"status"</span>: <span class="number">0</span>,</span><br><span class="line">	<span class="string">"data"</span>:&#123;</span><br><span class="line">		<span class="string">"userId"</span>:<span class="number">123</span>,	<span class="comment">//用户ID</span></span><br><span class="line">		<span class="string">"userName"</span>:<span class="string">"张三"</span>	<span class="comment">//用户名</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="string">"msg"</span>: <span class="string">"success"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Result</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">status</span>&gt;</span>0<span class="tag">&lt;/<span class="name">status</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">msg</span>&gt;</span>success<span class="tag">&lt;/<span class="name">msg</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">userId</span> <span class="attr">value</span>=<span class="string">"123"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">userName</span> <span class="attr">value</span>=<span class="string">"张三"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Result</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="返回状态"><a href="#返回状态" class="headerlink" title="返回状态"></a>返回状态</h4><p>必要时需要列出所有返回状态对应的数据格式。</p>
<table>
<thead>
<tr>
<th>状态值</th>
<th>状态说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td>500</td>
<td>系统异常</td>
</tr>
<tr>
<td>404</td>
<td>请求不存在</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/blog/2016/03/28/api-design/" data-id="cimebmvfm0002zsqen0v7g6g2" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2016/03/">March 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2016/03/30/vim-xml-format/">vim下xml文件格式化</a>
          </li>
        
          <li>
            <a href="/blog/2016/03/30/nsq-start/">初识NSQ分布式实时消息架构</a>
          </li>
        
          <li>
            <a href="/blog/2016/03/30/windows-port-used/">windows下端口占用程序查询</a>
          </li>
        
          <li>
            <a href="/blog/2016/03/28/api-design/">API接口文档设计</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 yangdage<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="http://apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script> <script type="text/javascript">
//<![CDATA[
if (typeof jQuery == 'undefined') {
document.write(unescape("%3Cscript src='/js/jquery-2.0.3.min.js' type='text/javascript'%3E%3C/script%3E"));
}
// ]]>
</script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>

  </div>
</body>
</html>